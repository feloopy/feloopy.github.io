<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Support FelooPy</title>
  <style>
    body { font-family: 'Segoe UI', Tahoma, sans-serif; background: #f4f7fc; margin:0; padding:0 }
    .hero { background: #2b6cb0; color:#fff; text-align:center; padding:50px 20px }
    .container { max-width:900px; margin:-30px auto 40px; background:#fff; border-radius:8px;
                 box-shadow:0 4px 12px rgba(0,0,0,0.05); padding:30px }
    .stats { display:grid; grid-template-columns:repeat(auto-fit,minmax(180px,1fr)); gap:20px }
    .card { background:#e2e8f0; border-radius:6px; padding:20px; text-align:center }
    .card h3 { margin-bottom:10px; color:#2b6cb0 }
    .value { font-size:2rem; font-weight:bold }
    .progress-container { background:#cbd5e0; border-radius:4px; height:20px; overflow:hidden }
    .progress-bar { width:0; height:100%; background:#38a169; transform-origin:left;
                    animation:fillBar 2s ease-out forwards }
    @keyframes fillBar { to { width: var(--pct); } }
    #map { width:100%; height:400px; margin-top:30px }
    canvas { margin-top:30px; width:100% !important; height:300px !important }
    .cta { display:inline-block; margin:20px 0; padding:12px 24px;
           background:#38a169; color:#fff; text-decoration:none; border-radius:4px }
    .cta:hover { background:#2f855a }
  </style>
</head>
<body>
  <section class="hero">
    <h1>Fuel FelooPy’s Future</h1>
  </section>
  <div class="container">
    <div class="stats">
      <div class="card"><h3>Total Downloads</h3><div id="total" class="value">–</div></div>
      <div class="card"><h3>YouTube Subs</h3><div id="subs" class="value">–</div></div>
      <div class="card"><h3>YouTube Views</h3><div id="views" class="value">–</div></div>
    </div>
    <div id="map"></div>
    <canvas id="chart"></canvas>
    <a class="cta" href="https://github.com/feloopy/feloopy" target="_blank">Star on GitHub ★</a>
  </div>

  <script src="https://www.gstatic.com/charts/loader.js"></script>
  <script>
    google.charts.load('current',{packages:['geochart']});
    google.charts.setOnLoadCallback(()=>{
      fetch('stats.json').then(r=>r.json()).then(s=>{
        const data=[['Country','Downloads'],...s.by_country.map(r=>[r.country,r.downloads])];
        const chart=new google.visualization.GeoChart(document.getElementById('map'));
        chart.draw(google.visualization.arrayToDataTable(data),{});
      });
    });
  </script>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    fetch('stats.json').then(r=>r.json()).then(s=>{
      document.getElementById('total').textContent=s.total;
      document.getElementById('subs').textContent=s.youtube_subs;
      document.getElementById('views').textContent=s.youtube_views;
      new Chart(document.getElementById('chart'),{
        type:'line',
        data:{
          labels:[s.fetched_at],
          datasets:[{ label:'Fetch time', data:[1], fill:false }]
        },
        options:{ responsive:true }
      });
    });
  </script>
</body>
</html>
